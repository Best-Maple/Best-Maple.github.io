<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Best Maple</title>
  <icon>https://www.gravatar.com/avatar/8078ed4e45be539c9a8d384112189b44</icon>
  <subtitle>人生短短几个秋</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://best-maple.github.io/"/>
  <updated>2019-12-30T07:21:32.768Z</updated>
  <id>http://best-maple.github.io/</id>
  
  <author>
    <name>Best Maple</name>
    <email>bestmaple@vip.qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SQL查询之rowswow_number() over()</title>
    <link href="http://best-maple.github.io/2019/12/30/SQL%E6%9F%A5%E8%AF%A2%E4%B9%8Brow_number()%20over()/"/>
    <id>http://best-maple.github.io/2019/12/30/SQL%E6%9F%A5%E8%AF%A2%E4%B9%8Brow_number()%20over()/</id>
    <published>2019-12-30T03:21:21.000Z</published>
    <updated>2019-12-30T07:21:32.768Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>查询表中的数据，如果某一字段有重复则取最后一条或者第一条</p></blockquote><p>数据如下：</p><p>其中标注了三组含有重复值的字段（hphm）</p><img data-src="https://wx3.sinaimg.cn/mw690/006Et0gvgy1gaellv0bxoj316c0bugsb.jpg" class="lazyload"><p> 对其中hphm字段有重复的字段进行节选，取最后一条或第一天进行数据统计</p><blockquote><p>使用<code>row_number() over()</code>查询</p></blockquote><p>直接贴代码↓</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.*  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ( </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">select</span> *, row_number() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> hphm <span class="keyword">order</span> <span class="keyword">by</span> jylsh <span class="keyword">asc</span>) <span class="keyword">as</span> group_index </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">from</span> VehicleInfo</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">) d</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">where</span> d.group_index = <span class="number">1</span></span></pre></td></tr></table></figure><p>结果↓</p><p><img alt="查询结果" data-src="https://tvax3.sinaimg.cn/large/006Et0gvgy1gaelu2uj5tj316m02s400.jpg" class="lazyload"></p><blockquote><p>解析</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *, row_number() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> hphm <span class="keyword">order</span> <span class="keyword">by</span> jylsh <span class="keyword">asc</span>) <span class="keyword">as</span> group_index <span class="keyword">from</span> VehicleInfo</span></pre></td></tr></table></figure><p>这一条语句执行之后会产生如下数据↓ （此处为了方便查看节选部分字段）</p><p><img alt="查询结果" data-src="https://wx4.sinaimg.cn/mw690/006Et0gvgy1gaepuqrpamj30gq0cediw.jpg" class="lazyload"></p><p>为重复数据编上号，再将此结果集为目标进行查询，<code>where d.group_index = 1</code>即可得到重复数据的第一条数据，可以利用asc与desc来排序，得到最后一条或者第一条，SQL默认为Asc排序</p><blockquote><p><code>row_number() over()</code> 用法</p></blockquote><ul><li><p>语法   </p><pre><code>row_number() over(order by 排序列 asc )row_number() over(partition by 分组列 order by 排序列  asc)</code></pre></li></ul><ul><li><p>数据：<img alt="数据" data-src="https://tvax2.sinaimg.cn/large/006Et0gvgy1gaer2yoqgtj30he02bjrn.jpg" class="lazyload"></p></li><li><p>使用</p><ol><li><p>row_number() over(order by 排序列 asc )</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *,row_number() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> TB_StudentInfo.S_ID) <span class="keyword">as</span> dataIndex </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">TB_StudentInfo <span class="keyword">inner</span> <span class="keyword">join</span> TB_GradeInfo </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">on</span> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">TB_GradeInfo.G_ID = TB_StudentInfo.S_Grade</span></pre></td></tr></table></figure><p> <img alt="查询结果" data-src="https://tva4.sinaimg.cn/large/006Et0gvgy1gaer8dblcuj30jb02d74k.jpg" class="lazyload"></p><p> 可以看到最末尾新增一列dataIndex，可以以此作为条件进行筛选</p></li><li><p>row_number() over(partition by 分组列 order by 排序列  asc)</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *,row_number() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> TB_StudentInfo.S_Sex <span class="keyword">order</span> <span class="keyword">by</span> TB_StudentInfo.S_ID) <span class="keyword">as</span> dataIndex </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">TB_StudentInfo <span class="keyword">inner</span> <span class="keyword">join</span> TB_GradeInfo </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">on</span> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">TB_GradeInfo.G_ID = TB_StudentInfo.S_Grade</span></pre></td></tr></table></figure><p> <img alt="查询结果" data-src="https://tva1.sinaimg.cn/large/006Et0gvgy1gaerqxa6lnj30je02n74l.jpg" class="lazyload"></p><p> 以S_Sex进行分组排序   <code>partition by S_Sex</code></p></li></ol></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;查询表中的数据，如果某一字段有重复则取最后一条或者第一条&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;数据如下：&lt;/p&gt;
&lt;p&gt;其中标注了三组含有重复值的字段（hphm）&lt;/p&gt;
&lt;img data-src=&quot;https://wx3.sinaimg.
      
    
    </summary>
    
    
      <category term="编程" scheme="http://best-maple.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="SQL" scheme="http://best-maple.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>知乎问答【世界上什么最可怕】</title>
    <link href="http://best-maple.github.io/2019/12/05/%E7%9F%A5%E4%B9%8E%E6%96%87%E7%AB%A0%E3%80%90%E4%B8%96%E7%95%8C%E4%B8%8A%E4%BB%80%E4%B9%88%E6%9C%80%E5%8F%AF%E6%80%95%E3%80%91/"/>
    <id>http://best-maple.github.io/2019/12/05/%E7%9F%A5%E4%B9%8E%E6%96%87%E7%AB%A0%E3%80%90%E4%B8%96%E7%95%8C%E4%B8%8A%E4%BB%80%E4%B9%88%E6%9C%80%E5%8F%AF%E6%80%95%E3%80%91/</id>
    <published>2019-12-05T02:01:06.000Z</published>
    <updated>2019-12-05T05:10:27.594Z</updated>
    
    <content type="html"><![CDATA[<p><strong><a href="https://www.zhihu.com/question/356188192" target="_blank" rel="noopener">世界上什么最可怕？-知乎</a></strong></p><p><img alt="无尽森林" data-src="https://tvax3.sinaimg.cn/mw690/006Et0gvgy1g9lmdffpq2j33y8280hdx.jpg" class="lazyload"></p><hr><p>今天早上我一好哥们儿微信给我发了一个链接</p><p>邀请回答知乎问题【世界上什么最可怕？】</p><p>我当时心想咱们现在年轻人能怕什么？就怕穷</p><p>于是在公交车上，我带着一丝好奇想看看别人的回答，点进了问答文章</p><blockquote><p><em>人言可畏、爱情、欲望、无知、蟑螂、死亡、浑浑噩噩的状态、没钱、年龄、误解、人性的恶，自我否定、失去希望、孤独、迷茫 … …</em></p></blockquote><p>在我漫不经心的翻阅一大片回答后</p><p>我认真的在想到底什么是世界上最可怕的</p><p>真的是穷吗？或者死亡？孤独？</p><p>想起曾看过的一部电影《 流浪猫鲍勃》</p><hr><p>主人公因小时候父母的关系问题，没有得到同年应有的关爱与亲情，导致他最后变成一个堕落的人，走上吸毒的深渊，家人抛弃了他，朋友也仅仅是毒友。<code>（简短描述，可能有偏差）</code></p><hr><p>上述经历，放在任何一个人身上，我相信没有人会觉得这没什么，这不可怕。</p><p>当然这部电影结局是好的，通过种种努力，他戒了毒，有了女朋友，家人也原谅了他，还出了书。</p><p>想起这些我发现，这些可怕的事情，是一个过程，他经历完了这些过程，并且生活趋于美好了~</p><p>我想，我能给出的答案是，如果一件事，没有尽头，那就是最可怕的</p><ul><li>无尽的流言蜚语</li><li>无尽的欲望</li><li>无尽的蟑螂</li><li>无尽的穷</li><li>无尽的孤独</li><li>无尽的迷茫</li></ul><p>终究会使人走向死亡，也就有了尽头。</p><blockquote><p><em><a href="https://www.zhihu.com/question/356188192/answer/923091364" target="_blank" rel="noopener">最后附上我的知乎回答-点击直达</a></em></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://www.zhihu.com/question/356188192&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;世界上什么最可怕？-知乎&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;无尽森林
      
    
    </summary>
    
    
      <category term="杂谈" scheme="http://best-maple.github.io/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="杂谈" scheme="http://best-maple.github.io/tags/%E6%9D%82%E8%B0%88/"/>
    
      <category term="见闻" scheme="http://best-maple.github.io/tags/%E8%A7%81%E9%97%BB/"/>
    
  </entry>
  
  <entry>
    <title>开篇文章</title>
    <link href="http://best-maple.github.io/2019/12/04/%E5%BC%80%E7%AF%87%E6%96%87%E7%AB%A0/"/>
    <id>http://best-maple.github.io/2019/12/04/%E5%BC%80%E7%AF%87%E6%96%87%E7%AB%A0/</id>
    <published>2019-12-04T02:59:23.000Z</published>
    <updated>2019-12-05T02:33:36.350Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">console.log(&quot;Hi~ Hexo&quot;);</span></pre></td></tr></table></figure><p><em>感觉现在个人Blog还挺流行的，交换交换友链之类的，感觉还挺有意思</em></p><p><em>于是花了两个小时，按照教程搭了一个</em></p><p><em>后期再调整调整，换个域名啥的</em></p><p><em>开篇也没什么想写的，目前就这样吧。</em></p><p><em>以后在这里写写东西，补充学习记录吧</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;
      
    
    </summary>
    
    
      <category term="随笔" scheme="http://best-maple.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="Hexo" scheme="http://best-maple.github.io/tags/Hexo/"/>
    
      <category term="随笔" scheme="http://best-maple.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
      <category term="杂谈" scheme="http://best-maple.github.io/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
</feed>
